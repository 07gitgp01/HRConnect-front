<div class="signup-container">
  <div class="signup-card">
    <h2>Inscription Candidat Volontaire</h2>
    
    <div class="role-info">
      <p><strong>Espace réservé aux candidats volontaires</strong></p>
      <p>Créez votre compte pour postuler aux missions de bénévolat du PNVB</p>
      <p><small>Vous compléterez votre pièce d'identité dans votre profil après l'inscription</small></p>
    </div>

    <!-- Message de succès -->
    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>

    <!-- Message d'erreur général -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
      
      <!-- Informations personnelles -->
      <div class="form-section">
        <h3>Informations Personnelles</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label>Nom *</label>
            <input type="text" formControlName="nom" class="form-control" 
                   [class.is-invalid]="nom?.invalid && nom?.touched"
                   placeholder="Votre nom">
            <div *ngIf="nom?.invalid && nom?.touched" class="error">
              <span *ngIf="nom?.hasError('required')">Le nom est requis</span>
              <span *ngIf="nom?.hasError('minlength')">Minimum 2 caractères</span>
              <span *ngIf="nom?.hasError('maxlength')">Maximum 50 caractères</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>Prénom *</label>
            <input type="text" formControlName="prenom" class="form-control" 
                   [class.is-invalid]="prenom?.invalid && prenom?.touched"
                   placeholder="Votre prénom">
            <div *ngIf="prenom?.invalid && prenom?.touched" class="error">
              <span *ngIf="prenom?.hasError('required')">Le prénom est requis</span>
              <span *ngIf="prenom?.hasError('minlength')">Minimum 2 caractères</span>
              <span *ngIf="prenom?.hasError('maxlength')">Maximum 50 caractères</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Email *</label>
            <input type="email" formControlName="email" class="form-control" 
                   [class.is-invalid]="email?.invalid && email?.touched"
                   placeholder="votre@email.com">
            <div *ngIf="email?.invalid && email?.touched" class="error">
              {{ getEmailErrorMessage() }}
            </div>
          </div>

          <div class="form-group">
            <label>Téléphone *</label>
            <input type="tel" formControlName="telephone" class="form-control" 
                   [class.is-invalid]="telephone?.invalid && telephone?.touched"
                   placeholder="77123456" maxlength="8">
            <div *ngIf="telephone?.invalid && telephone?.touched" class="error">
              {{ getTelephoneErrorMessage() }}
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Date de naissance *</label>
            <input type="date" formControlName="dateNaissance" class="form-control"
                   [class.is-invalid]="dateNaissance?.invalid && dateNaissance?.touched">
            <div *ngIf="dateNaissance?.invalid && dateNaissance?.touched" class="error">
              {{ getDateNaissanceErrorMessage() }}
            </div>
          </div>

          <div class="form-group">
            <label>Sexe *</label>
            <select formControlName="sexe" class="form-control"
                    [class.is-invalid]="sexe?.invalid && sexe?.touched">
              <option value="">Sélectionnez...</option>
              <option value="M">Masculin</option>
              <option value="F">Féminin</option>
            </select>
            <div *ngIf="sexe?.invalid && sexe?.touched" class="error">
              Le sexe est requis
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Nationalité *</label>
          <input type="text" formControlName="nationalite" class="form-control" value="Burkinabè" readonly
                 [class.is-invalid]="nationalite?.invalid && nationalite?.touched">
          <div *ngIf="nationalite?.invalid && nationalite?.touched" class="error">
            La nationalité est requise
          </div>
        </div>
      </div>

      <!-- Compte de connexion -->
      <div class="form-section">
        <h3>Compte de connexion</h3>
        
        <div class="form-group">
          <label>Nom d'utilisateur *</label>
          <input type="text" formControlName="username" class="form-control" 
                 [class.is-invalid]="username?.invalid && username?.touched"
                 placeholder="Choisissez un nom d'utilisateur">
          <div *ngIf="username?.invalid && username?.touched" class="error">
            <span *ngIf="username?.hasError('required')">Le nom d'utilisateur est requis</span>
            <span *ngIf="username?.hasError('minlength')">Minimum 3 caractères</span>
            <span *ngIf="username?.hasError('maxlength')">Maximum 30 caractères</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Mot de passe *</label>
            <input type="password" formControlName="password" class="form-control" 
                   [class.is-invalid]="password?.invalid && password?.touched"
                   placeholder="Minimum 6 caractères">
            <div *ngIf="password?.invalid && password?.touched" class="error">
              {{ getPasswordErrorMessage() }}
            </div>
          </div>

          <div class="form-group">
            <label>Confirmer le mot de passe *</label>
            <input type="password" formControlName="confirmerMotDePasse" class="form-control" 
                   [class.is-invalid]="confirmerMotDePasse?.invalid && confirmerMotDePasse?.touched"
                   placeholder="Retapez votre mot de passe">
            <div *ngIf="confirmerMotDePasse?.invalid && confirmerMotDePasse?.touched" class="error">
              <span *ngIf="confirmerMotDePasse?.hasError('required')">La confirmation est requise</span>
              <span *ngIf="confirmerMotDePasse?.hasError('passwordMismatch')">Les mots de passe ne correspondent pas</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Consentement -->
      <div class="form-group consentement">
        <label class="consentement-label">
          <input type="checkbox" formControlName="consentementPolitique" class="consentement-checkbox"
                 [class.is-invalid]="consentementPolitique?.invalid && consentementPolitique?.touched">
          <span class="consentement-text">
            J'accepte la politique de confidentialité et l'utilisation de mes données par le PNVB *
          </span>
        </label>
        <div *ngIf="consentementPolitique?.invalid && consentementPolitique?.touched" class="error">
          Vous devez accepter la politique de confidentialité
        </div>
      </div>

      <!-- Bouton de soumission -->
      <button type="submit" [disabled]="isLoading || signupForm.invalid" class="btn btn-primary btn-lg">
        <span *ngIf="isLoading" class="loading-spinner"></span>
        {{ isLoading ? 'Inscription en cours...' : 'S\'inscrire comme Candidat' }}
      </button>

      <!-- Indicateur de chargement -->
      <div *ngIf="isLoading" class="loading-indicator">
        <p>Création de votre compte en cours...</p>
        <small>Veuillez patienter, cette opération peut prendre quelques secondes.</small>
      </div>
    </form>

    <div class="login-link">
      <p>Déjà un compte ? <a routerLink="/login">Connectez-vous ici</a></p>
    </div>

    <div class="other-accounts">
      <p><strong>Autres types de comptes :</strong></p>
      <ul>
        <li><strong>Compte Partenaire</strong> : Contactez l'administration PNVB</li>
        <li><strong>Compte Administrateur</strong> : Réservé au personnel PNVB</li>
      </ul>
    </div>
  </div>
</div>